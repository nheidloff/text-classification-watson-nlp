<?xml version="1.0" encoding="UTF-8"?><rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:wfw="http://wellformedweb.org/CommentAPI/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:sy="http://purl.org/rss/1.0/modules/syndication/" xmlns:slash="http://purl.org/rss/1.0/modules/slash/" xmlns:georss="http://www.georss.org/georss" xmlns:geo="http://www.w3.org/2003/01/geo/wgs84_pos#"><channel><title>Niklas Heidloff</title><atom:link href="http://heidloff.net/feed/" rel="self" type="application/rss+xml"/><link>http://heidloff.net</link><description/><lastBuildDate>
	Thu, 24 Nov 2022 10:47:53 +0000	</lastBuildDate><language>en-US</language><sy:updatePeriod>
	hourly	</sy:updatePeriod><sy:updateFrequency>
	1	</sy:updateFrequency><generator>https://wordpress.org/?v=5.1.15</generator><site xmlns="com-wordpress:feed-additions:1">102773794</site><item>
	
	
	<title>Training AI Models on Kubernetes</title>
	
	
	<link>http://heidloff.net/article/building-custom-ibm-watson-nlp-images-models/</link><pubDate>Wed, 23 Nov 2022 13:45:24 +0000</pubDate><dc:creator>
	<![CDATA[Niklas Heidloff]]></dc:creator><category><![CDATA[Articles]]></category><guid isPermaLink="false">http://heidloff.net/?p=x</guid><description>
	<![CDATA[...
]]></description><content:encoded>
<![CDATA[


<header class="entry-header">
		<h1 class="entry-title">Training AI Models on Kubernetes</h1>
            
		<div class="entry-meta">
			<span class="posted-on">Posted on <a href="http://heidloff.net/article/training-ai-models-kubernetes-open-source" rel="bookmark"><time class="entry-date published" datetime="2018-08-02T09:16:10+00:00">August 2, 2018</time></a></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="http://heidloff.net/author/niklasheidloff/">Niklas Heidloff</a></span></span>		</div><!-- .entry-meta -->
	</header>
	
<div class="entry-content">
		<p>Early this year IBM <a href="https://developer.ibm.com/code/2018/03/20/fabric-for-deep-learning/" rel="noopener" target="_blank">announced</a> Deep Learning as a Service within Watson Studio. The core of this service is available as open source and can be run on Kubernetes clusters. This allows developers and data scientists to train models with confidential data on-premises, for example on the Kubernetes-based <a href="https://www.ibm.com/cloud/private" rel="noopener" target="_blank">IBM Cloud Private</a>.<span id="more-3067"></span></p>
<p>The open source version of IBMâ€™s Deep Learning service is called <a href="https://github.com/IBM/FfDL" rel="noopener" target="_blank">Fabric for Deep Learning</a>. Fabric for Deep Learning supports framework independent training of Deep Learning models on distributed hardware. For the training CPUs can be used as well as <a href="https://github.com/IBM/FfDL/blob/master/docs/gpu-guide.md" rel="noopener" target="_blank">GPUs</a>. Check out the <a href="https://github.com/IBM/FfDL/blob/master/docs/user-guide.md#1-supported-deep-learning-frameworks" rel="noopener" target="_blank">documentation</a> for a list of DL frameworks, versions and processing units.</p>
<p><a href="http://heidloff.net/wp-content/uploads/2018/08/FfDL-blog-image.png"><img src="http://heidloff.net/wp-content/uploads/2018/08/FfDL-blog-image-1024x584.png" alt="FfDL-blog-image" width="750" height="428" class="alignnone size-large wp-image-3066" srcset="http://heidloff.net/wp-content/uploads/2018/08/FfDL-blog-image-1024x584.png 1024w, http://heidloff.net/wp-content/uploads/2018/08/FfDL-blog-image-300x171.png 300w" sizes="(max-width: 750px) 100vw, 750px"></a></p>
<p>I had open sourced samples that show how to train visual recognition models with Watson Studio that can be deployed to edge devices via <a href="https://github.com/nheidloff/watson-deep-learning-tensorflow-lite" rel="noopener" target="_blank">TensorFlow Lite</a> and <a href="https://github.com/nheidloff/watson-deep-learning-javascript" rel="noopener" target="_blank">TensorFlow.js</a>. I extended one of these samples slightly to show how to train the model with Fabric for Deep Learning instead. To do this, I only had to change a manifest file slightly since the format expected by Watson Studio is different. </p>
<p>This is the manifest file that describes how to invoke and run the training. For more details how to run trainings on Kubernetes, check out the <a href="https://github.com/nheidloff/watson-deep-learning-tensorflow-lite#training-with-fabric-for-deep-learning" rel="noopener" target="_blank">readme</a> of my project and the Fabric for Deep Learning <a href="https://github.com/IBM/FfDL/blob/master/docs/user-guide.md" rel="noopener" target="_blank">documentation</a>.</p>
<div><div id="highlighter_352135" class="syntaxhighlighter  plain"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="plain plain">name: retrain</code></div><div class="line number2 index1 alt1"><code class="plain plain">description: retrain</code></div><div class="line number3 index2 alt2"><code class="plain plain">version: "1.0"</code></div><div class="line number4 index3 alt1"><code class="plain plain">gpus: 2</code></div><div class="line number5 index4 alt2"><code class="plain plain">cpus: 8</code></div><div class="line number6 index5 alt1"><code class="plain plain">memory: 4Gb</code></div><div class="line number7 index6 alt2"><code class="plain plain">learners: 1</code></div><div class="line number8 index7 alt1">&nbsp;</div><div class="line number9 index8 alt2"><code class="plain plain">data_stores:</code></div><div class="line number10 index9 alt1"><code class="plain spaces">&nbsp;&nbsp;</code><code class="plain plain">- id: sl-internal-os</code></div><div class="line number11 index10 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">type: mount_cos</code></div><div class="line number12 index11 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">training_data:</code></div><div class="line number13 index12 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">container: nh-input</code></div><div class="line number14 index13 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">training_results:</code></div><div class="line number15 index14 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">container: nh-output</code></div><div class="line number16 index15 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">connection:</code></div><div class="line number17 index16 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">auth_url: <a href="http://169.62.129.231:32551">http://169.62.129.231:32551</a></code></div><div class="line number18 index17 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">user_name: test</code></div><div class="line number19 index18 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">password: test</code></div><div class="line number20 index19 alt1">&nbsp;</div><div class="line number21 index20 alt2"><code class="plain plain">framework:</code></div><div class="line number22 index21 alt1"><code class="plain spaces">&nbsp;&nbsp;</code><code class="plain plain">name: tensorflow</code></div><div class="line number23 index22 alt2"><code class="plain spaces">&nbsp;&nbsp;</code><code class="plain plain">version: "1.5.0-gpu-py3"</code></div><div class="line number24 index23 alt1"><code class="plain spaces">&nbsp;&nbsp;</code><code class="plain plain">command: python3 retrain.py --bottleneck_dir ${RESULT_DIR}/bottlenecks --image_dir ${DATA_DIR}/images --how_many_training_steps=1000 --architecture mobilenet_0.25_224 --output_labels ${RESULT_DIR}/labels.txt --output_graph ${RESULT_DIR}/graph.pb --model_dir ${DATA_DIR} --learning_rate 0.01 --summaries_dir ${RESULT_DIR}/retrain_logs</code></div><div class="line number25 index24 alt2">&nbsp;</div><div class="line number26 index25 alt1"><code class="plain plain">evaluation_metrics:</code></div><div class="line number27 index26 alt2"><code class="plain spaces">&nbsp;&nbsp;</code><code class="plain plain">type: tensorboard</code></div><div class="line number28 index27 alt1"><code class="plain spaces">&nbsp;&nbsp;</code><code class="plain plain">in: "$JOB_STATE_DIR/logs/tb"</code></div></div></td></tr></tbody></table></div></div>
<p>To initiate the training, this manifest file and the training Python code needs to be uploaded. In order to do this, you can either use the web user experience or a CLI.</p>
<p><a href="http://heidloff.net/wp-content/uploads/2018/08/ffdl-training.png"><img src="http://heidloff.net/wp-content/uploads/2018/08/ffdl-training-1024x429.png" alt="ffdl-training" width="750" height="314" class="alignnone size-large wp-image-3065" srcset="http://heidloff.net/wp-content/uploads/2018/08/ffdl-training-1024x429.png 1024w, http://heidloff.net/wp-content/uploads/2018/08/ffdl-training-300x126.png 300w" sizes="(max-width: 750px) 100vw, 750px"></a></p>
<p>In my example Iâ€™ve stored the data on my Kubernetes cluster. Fabric for Deep Learning comes with <a href="https://github.com/IBM/FfDL#6-detailed-testing-instructions" rel="noopener" target="_blank">S3 based Object Storage</a> which means that you can use the AWS CLI to upload and download data. Alternatively you could also use Object Storage in the cloud, for example <a href="https://console.bluemix.net/catalog/services/cloud-object-storage" rel="noopener" target="_blank">IBMâ€™s Cloud Object Storage</a>.</p>
<p>To find out more about Fabric for Deep Learning, check out these <a href="https://github.com/IBM/FfDL/tree/master/demos" rel="noopener" target="_blank">resources</a>.</p>
<div class="sharedaddy sd-sharing-enabled"><div class="robots-nocontent sd-block sd-social sd-social-official sd-sharing"><h3 class="sd-title">Share this:</h3><div class="sd-content"><ul><li class="share-twitter"><iframe id="twitter-widget-1" scrolling="no" frameborder="0" allowtransparency="true" allowfullscreen="true" class="twitter-share-button twitter-share-button-rendered twitter-tweet-button" style="position: static; visibility: visible; width: 73px; height: 20px;" title="Twitter Tweet Button" src="https://platform.twitter.com/widgets/tweet_button.644279d1635fd969e87af94a98bd232b.en.html#dnt=false&amp;id=twitter-widget-1&amp;lang=en&amp;original_referer=http%3A%2F%2Fheidloff.net%2Farticle%2Ftraining-ai-models-kubernetes-open-source&amp;partner=tfwp&amp;size=m&amp;text=Training%20AI%20Models%20on%20Kubernetes&amp;time=1669387753721&amp;type=share&amp;url=http%3A%2F%2Fheidloff.net%2Farticle%2Ftraining-ai-models-kubernetes-open-source" data-url="http://heidloff.net/article/training-ai-models-kubernetes-open-source"></iframe></li><li class="share-linkedin"><div class="linkedin_button"><span class="IN-widget" data-lnkd-debug="<script type=&quot;in/share+init&quot; data-url=&quot;http://heidloff.net/article/training-ai-models-kubernetes-open-source&quot; data-counter=&quot;right&quot;></script>" style="display: inline-block; line-height: 1; vertical-align: bottom; padding: 0px; margin: 0px; text-indent: 0px; text-align: center;"><span style="padding: 0px !important; margin: 0px !important; text-indent: 0px !important; display: inline-block !important; vertical-align: bottom !important; font-size: 1px !important;"><button class="IN-36f20d8e-4c6e-4cef-bba0-83622a7a0637-1G9ISYhSF8XoOmdcl0yKDu"><xdoor-icon aria-hidden="true"><svg viewBox="0 0 24 24" width="24px" height="24px" x="0" y="0" preserveAspectRatio="xMinYMin meet">
      <g style="fill: currentColor">
        <rect x="-0.003" style="fill:none;" width="24" height="24"></rect>
        <path style="" d="M20,2h-16c-1.1,0-2,0.9-2,2v16c0,1.1,0.9,2,2,2h16c1.1,0,2-0.9,2-2V4C22,2.9,21.1,2,20,2zM8,19h-3v-9h3V19zM6.5,8.8C5.5,8.8,4.7,8,4.7,7s0.8-1.8,1.8-1.8S8.3,6,8.3,7S7.5,8.8,6.5,8.8zM19,19h-3v-4c0-1.4-0.6-2-1.5-2c-1.1,0-1.5,0.8-1.5,2.2V19h-3v-9h2.9v1.1c0.5-0.7,1.4-1.3,2.6-1.3c2.3,0,3.5,1.1,3.5,3.7V19z"></path>
      </g>
    </svg></xdoor-icon>Share</button></span></span></div></li><li class="share-facebook"><div class="fb-share-button fb_iframe_widget" data-href="http://heidloff.net/article/training-ai-models-kubernetes-open-source" data-layout="button_count" fb-xfbml-state="rendered" fb-iframe-plugin-query="app_id=249643311490&amp;container_width=0&amp;href=http%3A%2F%2Fheidloff.net%2Farticle%2Ftraining-ai-models-kubernetes-open-source&amp;layout=button_count&amp;locale=en_US&amp;sdk=joey"><span style="vertical-align: bottom; width: 77px; height: 20px;"><iframe name="f3fc93e007734ac" width="1000px" height="1000px" data-testid="fb:share_button Facebook Social Plugin" title="fb:share_button Facebook Social Plugin" frameborder="0" allowtransparency="true" allowfullscreen="true" scrolling="no" allow="encrypted-media" src="https://web.facebook.com/v2.3/plugins/share_button.php?app_id=249643311490&amp;channel=https%3A%2F%2Fstaticxx.facebook.com%2Fx%2Fconnect%2Fxd_arbiter%2F%3Fversion%3D46%23cb%3Df297bdbf5e85eb4%26domain%3Dheidloff.net%26is_canvas%3Dfalse%26origin%3Dhttp%253A%252F%252Fheidloff.net%252Ff204e6a5f3ffe04%26relation%3Dparent.parent&amp;container_width=0&amp;href=http%3A%2F%2Fheidloff.net%2Farticle%2Ftraining-ai-models-kubernetes-open-source&amp;layout=button_count&amp;locale=en_US&amp;sdk=joey" style="border: none; visibility: visible; width: 77px; height: 20px;" class=""></iframe></span></div></li><li class="share-google-plus-1 share-deprecated"><a rel="nofollow" data-shared="" class="share-google-plus-1 sd-button" href="http://heidloff.net/article/training-ai-models-kubernetes-open-source" title="The Google+ service has shut down. This sharing button is not displayed to your visitors and should be removed."><span>Google+ has shut down</span></a></li><li class="share-end"></li></ul></div></div></div>			</div>

]]></content:encoded><post-id xmlns="com-wordpress:feed-additions:1">5378</post-id></item></channel></rss>