Shift-Left Continuous Integration with DevSecOps Pipelines. <p><em>IBM provides a DevSecOps reference implementation that I&#8217;ve used to build our SaaS reference architecture. This article describes the CI pipeline, especially the part to enforce branch protection.</em><span id="more-4936"></span></p>
<p>This article is part of a mini series.</p>
<ul>
<li><a href="http://heidloff.net/article/devsecops-saas-reference-architecture-openshift/" rel="noopener noreferrer" target="_blank">DevSecOps for SaaS Reference Architecture on OpenShift</a></li>
<li>This article: <a href="http://heidloff.net/article/shift-left-continuous-integration-devsecops-pipelines/" rel="noopener noreferrer" target="_blank">Shift-Left Continuous Integration with DevSecOps Pipelines</a></li>
<li><a href="http://heidloff.net/article/change-evidence-issue-management-devsecops/" rel="noopener noreferrer" target="_blank">Change, Evidence and Issue Management with DevSecOps</a></li>
<li><a href="http://heidloff.net/article/continuous-delivery-ibm-devsecops-reference-architecture/" rel="noopener noreferrer" target="_blank">Continuous Delivery with DevSecOps Reference Architecture</a></li>
<li><a href="http://heidloff.net/article/tekton-without-tekton-devsecops-pipelines/" rel="noopener noreferrer" target="_blank">Tekton without Tekton in DevSecOps Pipelines</a></li>
</ul>
<p>A core concept of DevSecOps is &#8216;shift left testing and security&#8217;. The basic idea is simple. Do as much security and functional testing as early as possible in the software development lifecycle. The earlier issues are detected, the easier and cheaper is it to fix the issues. </p>
<p>These are the main tasks of the first of the two CI pipelines that are part of the IBM DevSecOps reference implementation.</p>
<ul>
<li>Branch protection is ensured so that developers cannot push to the main branch directly</li>
<li>CIS checks are run</li>
<li>Secrets in code and config files are detected</li>
<li>Unit tests are run</li>
<li>Vulnerability scans are performed</li>
</ul>
<p>The <a href="http://Continuous Integration (CI) toolchain introduction https://cloud.ibm.com/docs/devsecops?topic=devsecops-tutorial-cd-devsecops#devsecops-ci-toolchain-intro" rel="noopener noreferrer" target="_blank">documentation</a> describes these steps in more details. Let&#8217;s look how this can be done when developers check in code. You can find the <a href="https://github.com/IBM/multi-tenancy-documentation/blob/main/documentation/kubernetes-via-ibm-kubernetes-service-and-ibm-openshift/ci-pull-request.md" rel="noopener noreferrer" target="_blank">complete flow</a> in the GitHub repo.</p>
<p>Changes from developers are not pushed into the main branch directly. Instead feature branches are used which is a good pattern anyway.</p>
<p><img src="http://heidloff.net/wp-content/uploads/2022/03/devsecops1-002.png" alt="" width="3840" height="2160" class="alignnone size-full wp-image-4940" srcset="http://heidloff.net/wp-content/uploads/2022/03/devsecops1-002.png 3840w, http://heidloff.net/wp-content/uploads/2022/03/devsecops1-002-300x169.png 300w, http://heidloff.net/wp-content/uploads/2022/03/devsecops1-002-768x432.png 768w, http://heidloff.net/wp-content/uploads/2022/03/devsecops1-002-1024x576.png 1024w" sizes="(max-width: 3840px) 100vw, 3840px" /></p>
<p>After the pull request has been created, the first CI pipeline starts automatically to perform the various security and functional tests.</p>
<p><img src="http://heidloff.net/wp-content/uploads/2022/03/devsecops1-008.png" alt="" width="3840" height="2160" class="alignnone size-full wp-image-4941" srcset="http://heidloff.net/wp-content/uploads/2022/03/devsecops1-008.png 3840w, http://heidloff.net/wp-content/uploads/2022/03/devsecops1-008-300x169.png 300w, http://heidloff.net/wp-content/uploads/2022/03/devsecops1-008-768x432.png 768w, http://heidloff.net/wp-content/uploads/2022/03/devsecops1-008-1024x576.png 1024w" sizes="(max-width: 3840px) 100vw, 3840px" /></p>
<p>I like the integration in GitHub. As a developer I can see most of the results directly in the GitHub experience. In the background the pipeline on the IBM Cloud is run.</p>
<p><img src="http://heidloff.net/wp-content/uploads/2022/03/devsecops1-009.png" alt="" width="3840" height="2160" class="alignnone size-full wp-image-4942" srcset="http://heidloff.net/wp-content/uploads/2022/03/devsecops1-009.png 3840w, http://heidloff.net/wp-content/uploads/2022/03/devsecops1-009-300x169.png 300w, http://heidloff.net/wp-content/uploads/2022/03/devsecops1-009-768x432.png 768w, http://heidloff.net/wp-content/uploads/2022/03/devsecops1-009-1024x576.png 1024w" sizes="(max-width: 3840px) 100vw, 3840px" /></p>
<p>Even if the various security checks have been successful, the pull request still cannot be merged. A second developer (in this case my colleague Adam) needs to approve first. From my personal experience I can say that these reviews are another very good pattern.</p>
<p><img src="http://heidloff.net/wp-content/uploads/2022/03/devsecops1-015.png" alt="" width="3840" height="2160" class="alignnone size-full wp-image-4944" srcset="http://heidloff.net/wp-content/uploads/2022/03/devsecops1-015.png 3840w, http://heidloff.net/wp-content/uploads/2022/03/devsecops1-015-300x169.png 300w, http://heidloff.net/wp-content/uploads/2022/03/devsecops1-015-768x432.png 768w, http://heidloff.net/wp-content/uploads/2022/03/devsecops1-015-1024x576.png 1024w" sizes="(max-width: 3840px) 100vw, 3840px" /></p>
<p>Check out the <a href="https://cloud.ibm.com/docs/devsecops?topic=devsecops-tutorial-cd-devsecops" rel="noopener noreferrer" target="_blank">IBM Toolchains documentation</a> and the <a href="https://github.com/IBM/multi-tenancy" rel="noopener noreferrer" target="_blank">SaaS reference architecture</a> to find out more.</p>
<p>The post <a rel="nofollow" href="http://heidloff.net/article/shift-left-continuous-integration-devsecops-pipelines/">Shift-Left Continuous Integration with DevSecOps Pipelines</a> appeared first on <a rel="nofollow" href="http://heidloff.net">Niklas Heidloff</a>.</p>
